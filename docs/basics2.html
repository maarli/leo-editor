

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>External Files and Clones &mdash; Leo 4.11 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '4.11',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="top" title="Leo 4.11 documentation" href="index.html" />
    <link rel="up" title="The Leo Tutorial" href="intro.html" />
    <link rel="next" title="Creating Documents" href="basics3.html" />
    <link rel="prev" title="Creating and Editing Outlines" href="basics1.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="basics3.html" title="Creating Documents"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="basics1.html" title="Creating and Editing Outlines"
             accesskey="P">previous</a> |</li>
        <li><a href="leo_toc.html">Leo 4.11 documentation</a> &raquo;</li>
          <li><a href="intro.html" accesskey="U">The Leo Tutorial</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="external-files-and-clones">
<h1><a class="toc-backref" href="#id1">External Files and Clones</a><a class="headerlink" href="#external-files-and-clones" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#external-files-and-clones" id="id1">External Files and Clones</a><ul>
<li><a class="reference internal" href="#creating-external-files" id="id2">Creating external files</a><ul>
<li><a class="reference internal" href="#creating-non-programming-files-with-all" id="id3">Creating non-programming files with &#64;all</a></li>
<li><a class="reference internal" href="#creating-programming-source-files-with-others" id="id4">Creating programming source files with &#64;others</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-auto" id="id5">Using &#64;auto</a></li>
<li><a class="reference internal" href="#clones" id="id6">Clones</a></li>
<li><a class="reference internal" href="#views" id="id7">Views</a></li>
<li><a class="reference internal" href="#summary" id="id8">Summary</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="creating-external-files">
<h2><a class="toc-backref" href="#id2">Creating external files</a><a class="headerlink" href="#creating-external-files" title="Permalink to this headline">¶</a></h2>
<p>Leo stores outline data on your file system in <strong>.leo files</strong>.</p>
<p>Rather than storing all your data in the .leo file, you may store parts of
your outline data in <strong>external files</strong>, files on your file system.</p>
<p><strong>&#64;file nodes</strong> create external files. &#64;file nodes have headlines starting
with &#64;file followed by a file name:</p>
<div class="highlight-python"><pre>@file leoNodes.py
@file ../../notes.text</pre>
</div>
<p>Leo reads external files automatically when you open Leo outline, and
writes all <strong>dirty</strong> (changed) external files when you save any Leo
outline.</p>
<p>When writing &#64;file nodes, Leo adds <strong>sentinel comments</strong> to external files.
Sentinels embed Leo&#8217;s outline structure into external files.</p>
<p>If you don&#8217;t want sentinels in your sources, skip head to
<a class="reference external" href="http://leoeditor.com/basics2.html#using-auto-nodes">Using &#64;auto and friends</a> in Leo&#8217;s <a class="reference external" href="http://leoeditor.com/basics2.html">Intermediate Topics tutorial</a>.</p>
<div class="section" id="creating-non-programming-files-with-all">
<h3><a class="toc-backref" href="#id3">Creating non-programming files with &#64;all</a><a class="headerlink" href="#creating-non-programming-files-with-all" title="Permalink to this headline">¶</a></h3>
<p>Use the <strong>&#64;all</strong> directive for non-programming files. &#64;all tells Leo to
write the <strong>&#64;file tree</strong> (the &#64;file node and all its descendants) to the
external file in <strong>outline order</strong>, the order in which the nodes appear in
the outline pane when all nodes are expanded.</p>
</div>
<div class="section" id="creating-programming-source-files-with-others">
<h3><a class="toc-backref" href="#id4">Creating programming source files with &#64;others</a><a class="headerlink" href="#creating-programming-source-files-with-others" title="Permalink to this headline">¶</a></h3>
<p>Now we come to the programming features that distinguish Leo from all other
programming environments. Please study this section carefully if you intend
to use Leo for programming. If you get stuck, please <a class="reference external" href="https://groups.google.com/forum/#!forum/leo-editor">ask for help</a>
immediately.</p>
<p>The &#64;others directive, and markup called section references (see below),
tell Leo how to create external files.</p>
<p><strong>Essential Terms</strong>:</p>
<ul class="simple">
<li>A <strong>section name</strong> is any text of the form: &lt;&lt; any text &gt;&gt;.
(&gt;&gt; must not appear in &#8220;any text&#8221;.)</li>
<li>A <strong>section definition node</strong> is any node whose headline starts with a
section name.</li>
<li>A <strong>section reference</strong> is a section name that appears in body text.</li>
</ul>
<p>Leo creates external files containing &#64;others directives by writing the
<em>expansion</em> of the &#64;file node. <br />
The <strong>expansion</strong> of <em>any</em> node is
then ode&#8217;s body text after making these text <strong>substitutions</strong>:</p>
<ol class="arabic simple">
<li>Leo replaces &#64;others with the <em>expansion</em> of all descendant nodes
<strong>except</strong> section definition nodes. That&#8217;s how &#64;others got its name.</li>
<li>Leo replaces section references by the <em>expansion</em> of the body text of
the corresponding section definition node.</li>
</ol>
<p>Whitespace is significant before &#64;others and section references. Leo adds
the leading whitespace appearing before each &#64;others directive or section
reference to every line of their expansion. As a result, Leo can generate
external files even for Python.  The following cute trick works:</p>
<div class="highlight-python"><pre>if 1:
    &lt;&lt; a section &gt;&gt;
if 0:
    @others</pre>
</div>
<p><strong>Notes</strong>:</p>
<ul class="simple">
<li>Any node may contain a single &#64;others directive. No node may contain more
than one &#64;others directive.</li>
<li>Nodes that <em>aren&#8217;t</em> section definition nodes are included in the expansion
of the <em>nearest</em> ancestor node containing an &#64;others directive.</li>
<li>An <strong>orphan node</strong> is a descendant of an &#64;file node not included in any
substitution. Leo refuses to write external files containing orphan
nodes. Instead, Leo writes the &#64;file tree to the .leo file itself,
thereby preserving all data.</li>
</ul>
<p><strong>Example 1</strong>: The body of the &#64;file node for a typical Python module will
look something like:</p>
<div class="highlight-python"><pre>'''A docstring.'''
&lt;&lt; imports &gt;&gt;
@others
if __name__ == '__main__':
    main()</pre>
</div>
<p><strong>Example 2</strong>:  Here is a typical Python class definition in Leo:</p>
<div class="highlight-python"><pre>class MyClass:
    '''A docstring.'''
    @others</pre>
</div>
</div>
</div>
<div class="section" id="using-auto">
<h2><a class="toc-backref" href="#id5">Using &#64;auto</a><a class="headerlink" href="#using-auto" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="clones">
<h2><a class="toc-backref" href="#id6">Clones</a><a class="headerlink" href="#clones" title="Permalink to this headline">¶</a></h2>
<p>A <strong>clone</strong> is a node that appears in more than one place in a Leo outline.
Clones are marked with a small red arrow in its icon box.</p>
<p>All clones of a node are actually <em>the same node</em>, so any change to one
clone affects all clones. Inserting, moving or deleting any child of a
clone will change all other clones on the screen.</p>
<p>Clones are one of Leo&#8217;s most powerful features.
Clones allow data to be stored in <em>arbitrarily many</em> places within an outline.</p>
<p>Please take a few moments to experiment with clones:</p>
<ul class="simple">
<li>Create a node whose headline is A.</li>
<li>Ctrl-` (clone-node) clones node A.</li>
<li>Type some text into the body of A.</li>
<li>All clones of A now have the same body.</li>
<li>Insert a node, say B, as a child of any of the A nodes.</li>
<li>All the A nodes now have a B child.</li>
<li>See what happens if you clone B.</li>
<li>See what happens if you insert, delete or move nodes that are children of A.</li>
<li>When you delete a node&#8217;s penultimate clone,
the last clone becomes a regular node again.</li>
</ul>
</div>
<div class="section" id="views">
<h2><a class="toc-backref" href="#id7">Views</a><a class="headerlink" href="#views" title="Permalink to this headline">¶</a></h2>
<p>Using clones, you can create as many views of your data as you like.</p>
<p>Views gather data for bug fixes, design review or whatever.</p>
<p>To create a new view:</p>
<ul class="simple">
<li>Create an <em>ordinary</em> (non-cloned) node, to represent the view.
Let&#8217;s call this the <strong>view node</strong>.</li>
<li>Clone the nodes from the outline that you want contained in the view.</li>
<li>&#8220;Add&#8221; these clones to the view node by moving them so they become children
of the view node.</li>
<li>You can also add uncloned nodes to the view node.</li>
</ul>
<p>It&#8217;s particularly useful to create a new view for each programming task:</p>
<ul class="simple">
<li>Add clones of all nodes related to the task to the view node.</li>
<li>Now you can work on nodes in a single place; the location of the original
clones doesn&#8217;t matter.</li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id8">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Leo creates external files by replacing &#64;others and section references
with their expansions.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="leo_toc.html">
              <img class="logo" src="_static/Leo4-80-border.jpg" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="basics1.html"
                        title="previous chapter">Creating and Editing Outlines</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="basics3.html"
                        title="next chapter">Creating Documents</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="basics3.html" title="Creating Documents"
             >next</a> |</li>
        <li class="right" >
          <a href="basics1.html" title="Creating and Editing Outlines"
             >previous</a> |</li>
        <li><a href="leo_toc.html">Leo 4.11 documentation</a> &raquo;</li>
          <li><a href="intro.html" >The Leo Tutorial</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Edward K. Ream.
      Last updated on Oct 08, 2013.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.
    </div>
  </body>
</html>